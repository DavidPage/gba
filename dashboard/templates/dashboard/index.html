{% extends "gba_menu.html" %}

{% block pageHeader %}
Dashboard
{% endblock %}

{% block pageBody%}

<div>
    <h3 style=" float:left; padding-right:5px;">Current balance: </h3>
        {% if totalOfYear > 0 %}
            <h3 style=" float:left;color:green;"> {{ currentBank |floatformat:-2 }} €</h3>
        {% else %}
            {%if totalOfYear < 0 %}
                <h3 style="float:left; color:red;">{{ currentBank |floatformat:-2 }}€</h3>
            {% else %}
                <h3 style="float:left">{{ currentBank |floatformat:-2 }}€</h3>
            {% endif %}
        {% endif %}
    <h3 style="float:left;clear:both;padding-right:5px;">Profit and loss of the year: </h3>
    {% if totalOfYear > 0 %}
    <h3 style="float:left;color:green;">{{ totalOfYear }} €</h3>
    {% else %}
    {%if totalOfYear < 0 %}
    <h3 style="float:left; color:red;">{{ totalOfYear }} €</h3>
    {% else %}
    <h3 style="float:left;">{{ totalOfYear }} €</h3>
    {% endif %}
    {% endif %}

    {% if totalROIOfYear is not null %}
    <h3 style="clear:left;">ROI of the year: {{ totalROIOfYear |floatformat:-2 }} %</h3>
    {% else %}
    <h3 style="clear:left;">ROI of the month: {{ totalROIOfMonth }} %</h3>
    {% endif %}

</div>

<canvas id="myChart" width="1200" height="400"></canvas>
<script type="text/javascript">

var ctx = document.getElementById("myChart");
var myChart = Chart.Line(ctx, {
    type: 'line',
    data: {
        labels: ["January", "February", "March", "April", "May", "June", "July","August", "September", "October", "November", "December"],
        datasets: [{
            label: "Profit / Loss",
            fill: true,
            lineTension: 0.2,
            backgroundColor: "rgba(75,192,192,0.4)",
            borderColor: "rgba(75,192,192,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: {{ tradesByMonthCollection }},
            spanGaps: false,
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:false
                }
            }]
        }
    }
});



</script>

{% endblock %}
